!function(n,$){"use strict";var r="ht",o=n[r],u="position",y="absolute",g="px",z="left",d="top",B="innerHTML",s="className",W="width",v="height",T="0",q="display",Z="none",F="visibility",L="user-select",U="margin",c="padding",t=null,h=o.Color,x=o.Default,O=x.getInternal(),K=n.setTimeout,b=n.setInterval,M=n.clearTimeout,j=n.clearInterval,R=n.parseInt,p=x.isLeftButton,P=x.isDragging,Q=x.startDragging,D=x.getDistance,i=x.isTouchable,V=h.widgetIconHighlight,E=h.widgetIconBorder,X=h.widgetIconGradient,l=function(){return document},w=function(o,_){return o.querySelectorAll(_)},N=function(K){var r=l().createElement(K);return"ul"===K&&(J(r,u,"relative"),J(r,U,T),J(r,c,T),J(r,"list-style",Z),J(r,"box-sizing","border-box"),J(r,"-moz-box-sizing","border-box"),J(r,q,"inline-block"),J(r,"vertical-align","text-bottom"),J(r,"border","1px solid "+x.contextMenuBorderColor),J(r,"box-shadow","0 0 16px 1px "+x.contextMenuShadowColor),J(r,"overflow","hidden"),x.contextMenuBorderRadius&&J(r,"border-radius",x.contextMenuBorderRadius+g)),r},H=function(J){var x=J.touches[0];return x?x:J.changedTouches[0]},k=function(){return N("div")},m=function(){return N("canvas")},J=function(G,f,O){G.style.setProperty(f,O,t)},_=function(I,T,F){x.def(o.widget[I],T,F)},A=function(N,c){N.appendChild(c)},G=function(b,a){b.removeChild(a)},e=x.eventListenerOptionsFalse,a=(x.eventListenerOptionsTrue,function(l,n,z,c){l.addEventListener(n,z,c?e:e)}),Y=function(m,N,b,c){m.removeEventListener(N,b,c?e:e)};O.addMethod(x,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:E},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:V}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:E},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:V,gradient:x.imageGradient,gradientColor:X,background:V}]},contextMenuLabelFont:(i?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var C=function(U){var j=this,F=U._view;if(j.$11b=U,j.addListeners(),a(F,"contextmenu",function(k){k.preventDefault()}),!i){var G=j.$37b=j.$36b.bind(j);a(F,"mouseover",G),a(F,"mouseout",G)}};x.def(C,$,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(v){if(x.preventDefault(v),p(v)){for(var M=this,f=M.$11b,V=M.getView(),B=V.children,C=0;C<B.length;C++){var X=B[C],O=X.$24b,r=X.$25b;if(O&&O.contains(v.target))return f.scrollUp(X),M.$28b=K(function(){M.$29b=b(function(){f.scrollUp(X)},100)},500),Q(M,v),void 0;if(r&&r.contains(v.target))return f.scrollDown(X),M.$28b=K(function(){M.$29b=b(function(){f.scrollDown(X)},100)},500),Q(M,v),void 0}i&&(v=H(v)),M.$30b={x:v.pageX,y:v.pageY}}},handle_mousedown:function(D){this.handle_touchstart(D)},handle_touchend:function(d){if(p(d)){var B=this,T=B.$30b,h=i?{x:H(d).pageX,y:H(d).pageY}:{x:d.pageX,y:d.pageY};if(!T||D(T,h)>1)return delete B.$30b,void 0;for(var v=B.getView(),Y=B.$11b,r=d.target,x=t,o=t,w=Y._items,N=v.$26b,M=0;M<N.length;M++)if(o=N[M],o.contains(r)){x=o.getAttribute("data-id");break}if(x&&w){var n=Y.$17b(w,function(J){return J._id===x});if(n){var L=!1;n.disabled instanceof Function?L=n.disabled.call(Y,n):n.disabled===!0&&(L=!0),L||(n.items?i&&B.$36b(o,!0):Y.$1b(n,d))}}delete B.$30b}},$36b:function(B,S){if(!P()){var _,V=this,Y=V.$11b,X=V.getView(),Z=Y.$20b||X.children[0],O=Y.$19b,m=X.$26b,i=X.children,n=B.target,b=X.getBoundingClientRect(),e=x.getWindowInfo(),A=e.width,y=e.height,H=function(d){for(var W=0;W<i.length;W++){var $=i[W],F=new RegExp(d+"$"),w=$[s];if(w&&(F.test(w)||w.indexOf(d+" ")>=0))return $}},w=function(k){for(var X=0;X<m.length;X++){var y=m[X],R=new RegExp(k+"$"),H=y[s];if(H&&(R.test(H)||H.indexOf(k+" ")>=0))return y}},K=function(t){var V=w("menu-item"+t.$45b),I=V.getBoundingClientRect(),M=I.top-b.top,e=I.left-b.left;J(t,d,M+g),J(t,z,e+I.width+g);var k=t.getBoundingClientRect(),B=k.top,h=k.left,F=k.height,q=k.width,n=B+F+2,Y=h+q+2;n>y&&J(t,d,M+y-n+g),Y>A&&J(t,z,e-q+g)};if(S)_=B;else{if("mouseover"===B.type){for(var j=0;j<m.length;j++){var U=m[j];if(U.contains(n)){_=U;break}}if(!_&&O){var c=O.parentNode,L=H("submenu"+O.getAttribute("data-id"));(L&&L.contains(n)||c&&c.contains(n))&&(_=O)}}else if("mouseout"===B.type){for(var T=!1,f=B.relatedTarget,j=0;j<i.length;j++){var a=i[j];if("hidden"!==a.style.visibility&&a.contains(f)){T=!0;break}}if(T)return}!_&&Z&&(_=w("menu-item"+(Z.$45b||"NaN")))}if(_!=O){if(O)for(var G=O;G;){if(G[s]=G[s].replace(" menu-item-hover",""),G[s].indexOf("disabled")<0){var I=Y.getItemByProperty("_id",G.getAttribute("data-id"));null!=I.background?I.background instanceof Function?J(G,"background-color",I.background.call(Y,I)):J(G,"background-color",I.background):J(G,"background-color",x.contextMenuBackground),J(G,"color",x.contextMenuLabelColor)}var E=H("submenu"+G.getAttribute("data-id"));E&&J(E,F,"hidden");var M=G.parentNode;G=w("menu-item"+(M.$45b||"NaN"))}if(_){for(var R=_,q=[];R;){R[s]+=" menu-item-hover",R[s].indexOf("disabled")<0&&(J(R,"background-color",x.contextMenuHoverBackground),J(R,"color",x.contextMenuHoverLabelColor));var t=H("submenu"+R.getAttribute("data-id"));t&&(J(t,F,"visible"),q.push(t));var M=R.parentNode;R=w("menu-item"+(M.$45b||"NaN"))}q.reverse(),q.forEach(function(l){K(l)})}}Y.$19b=_,Y.$20b=_?_.parentNode:X.children[0]}},handle_mouseup:function(G){this.handle_touchend(G)},handleWindowTouchEnd:function(){var V=this;V.$28b!=t&&(M(V.$28b),delete V.$28b),V.$29b!=t&&(j(V.$29b),delete V.$29b),delete V.$34b,delete V.$30b,delete V.$35b},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handle_mousemove:function(x){this.handle_touchmove(x)},handle_touchmove:function(Y){if(!P()&&p(Y)){for(var w=this,f=w.getView().children,I=t,F=0;F<f.length;F++){var j=f[F];if(j.contains(Y.target)){I=j;break}}var S=w.$30b,y=i?{x:H(Y).pageX,y:H(Y).pageY}:{x:Y.pageX,y:Y.pageY};I&&S&&D(S,y)>2&&(Q(w,Y),w.$34b=I,w.$35b=I.$18b)}},handleWindowTouchMove:function(d){d.preventDefault();var y=this,Z=y.$11b,j=y.$34b,l=y.$35b,S=y.$30b;if(S&&j){var v=i?{x:H(d).pageX,y:H(d).pageY}:{x:d.pageX,y:d.pageY},q=v.y-S.y;q>0?Z.scrollUp(j,j.$18b-(l-q)):Z.scrollDown(j,l-q-j.$18b)}},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},$10b:function(L,W){L.preventDefault();for(var b=this,U=b.getView().children,H=t,X=0;X<U.length;X++){var j=U[X];if(j.contains(L.target)){H=j;break}}if(H){var _=this.$11b,o=_.getRowHeight();Math.abs(W)>.05&&(W>0?_.scrollUp(H,W*o):0>W&&_.scrollDown(H,-W*o))}},handle_mousewheel:function(u){this.$10b(u,u.wheelDelta/40)},handle_DOMMouseScroll:function(v){this.$10b(v,-v.detail)},$44b:function(J){this.getView().contains(J.target)||this.$11b.hide()},$41b:function(h){this.$11b.show(h)},$4b:function(i,W){var r=this.$11b;if(W=W||r._items,W&&W.length&&i.keyCode){var P=[i.keyCode];i.shiftKey&&P.push(16),i.ctrlKey&&P.push(17),i.altKey&&P.push(18),/mac/.test(n.navigator?n.navigator.userAgent.toLowerCase():"")?i.metaKey&&P.push(17):i.metaKey&&P.push(91),P.sort();var x=P.join(),D=r.$17b(W,function(J){if(J.key){var H=J.key.slice(0);return H.sort(),x===H.join()}});if(D){D.preventDefault!==!1&&i.preventDefault();var f=!1;D.disabled instanceof Function?f=D.disabled.call(r,D):D.disabled===!0&&(f=!0),f||r.$1b(D,i)}}},$39b:function(P){var s=this,N=H(P);s.$32b={x:N.pageX,y:N.pageY}},$38b:function(Y){var W=this,t=H(Y);W.$31b={x:t.pageX,y:t.pageY},W.$33b=K(function(){W.$31b&&(W.$32b?D(W.$31b,W.$32b)<10&&W.$11b.show(Y):W.$11b.show(Y)),delete W.$33b,delete W.$31b,delete W.$32b},600)},$40b:function(){var d=this;d.$33b!=t&&(M(d.$33b),delete d.$33b,delete d.$31b,delete d.$32b)}}),o.widget.ContextMenu=function(i){var Y=this,N=Y._view=O.createView(null,Y);N[s]="ht-widget-contextmenu",Y.setItems(i),Y.$13b=new C(Y),J(N,"font",x.contextMenuLabelFont),J(N,u,y),J(N,"cursor","default"),J(N,"-webkit-"+L,Z),J(N,"-moz-"+L,Z),J(N,"-ms-"+L,Z),J(N,L,Z),J(N,"box-sizing","border-box"),J(N,"-moz-box-sizing","border-box"),x.baseZIndex!=t&&J(N,"z-index",R(x.baseZIndex)+2+""),Y.$3b=function(z){Y.$13b.$4b(z)}},_("ContextMenu",$,{$5b:0,_items:t,$21b:t,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var h=this,i=h._enableGlobalKey;i===!1&&(a(l(),"keydown",h.$3b),h._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Y(l(),"keydown",this.$3b)},setItems:function(E){this._items=E},getItems:function(){return this._items},setVisibleFunc:function(f){this.$16b=f},setLabelMaxWidth:function(j){this.$43b=j},$1b:function(I,w){var y=this;if("check"===I.type)I.selected=!I.selected;else if("radio"===I.type){var B=I.groupId;y.$17b(y._items,function(c){c.groupId===B&&(c.selected=!1)}),I.selected=!0}if(y.hide(),I.action)I.action.apply(I.scope||y,[I,w]);else if(I.href){var c=I.linkTarget||"_self";n.open(I.href,c)}},getItemById:function(z){return this.getItemByProperty("id",z)},setItemVisible:function(A,R){var Q=this.getItemById(A);Q&&(Q.visible=R)},getItemByProperty:function(u,v,L){var C=this;if(L=L||C._items,!L||0===L.length)return t;var j=C.$17b(L,function(p){return p[u]===v});return j||t},scrollUp:function(x,y){var A=this;if(y=y==t?20:y,y=R(y),0!==y){var n=0;x.$18b>y&&(n=x.$18b-y),A.$42b(x,n),x.scrollTop=n,x.$18b=n}},scrollDown:function(D,q){var r=this;if(q=q==t?20:q,q=R(q),0!==q){var y=D.$22b,v=D.$23b,b=y-v;v+D.$18b+q<y&&(b=D.$18b+q),r.$42b(D,b),D.scrollTop=b,D.$18b=b}},$42b:function(T,R){R=R==t?T.$18b:R;var c=T.$24b,o=T.$25b;c&&(J(c,"top",R+g),0==R?J(c,q,Z):J(c,q,"block")),o&&(J(o,"bottom",-R+g),R==T.$22b-T.$23b?J(o,q,Z):J(o,q,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(W,Z){for(var k=0;k<W.length;k++){var F=W[k];if(Z(F))return F;if(F.items){var f=this.$17b(F.items,Z);if(f)return f}}},$2b:function(C,l){for(var T=this,E=0;E<C.length;E++){T.$5b++;var H=C[E];if(H.visible!==!1&&!(x.isFunction(H.visible)&&H.visible()===!1||T.$16b&&!T.$16b.call(T,H))){var M=N("li"),G=T.$5b+"";if(J(M,"white-space","nowrap"),J(M,q,"block"),"separator"===H||H.separator===!0){var V=k();V[s]="separator",J(V,v,x.contextMenuSeparatorWidth+g),J(V,"background",x.contextMenuSeparatorColor),A(M,V)}else{H._id=G,M.setAttribute("data-id",G);var p=N("span"),d=N("span"),L=m(),D=k();if(J(p,q,"inline-block"),J(p,v,"1.2em"),J(d,q,"inline-block"),J(d,v,"1.2em"),J(d,"line-height","1.2em"),L[s]="prefix",J(L,q,"inline-block"),J(L,W,"1em"),J(L,v,"1em"),J(L,"vertical-align","middle"),J(L,U,"0 0.2em"),"check"===H.type&&H.selected?L[s]+=" check-prefix":"radio"===H.type&&H.selected&&(L[s]+=" radio-prefix"),A(M,L),H.icon){var Q=m();Q[s]="contextmenu-item-icon",J(Q,q,"inline-block"),J(Q,v,"1.2em"),J(Q,W,"1.2em"),J(Q,"margin-right","0.2em"),J(Q,"float","left"),Q.$50b=H.icon,Q._item=H,A(p,Q)}if(d[B]=H.label,A(p,d),A(M,p),D[s]="suffix",J(D,q,"inline-block"),J(D,"margin-left","1em"),J(D,"margin-right","0.4em"),J(D,"text-align","right"),J(D,"font-size","75%"),H.items&&(D[B]=x.contextMenuSubmenuMark),H.suffix&&(D[B]=H.suffix),A(M,D),M[s]="menu-item menu-item"+G,null!=H.background?H.background instanceof Function?J(M,"background-color",H.background.call(T,H)):J(M,"background-color",H.background):J(M,"background-color",x.contextMenuBackground),J(M,"color",x.contextMenuLabelColor),J(M,c,"3px 0"),H.disabled instanceof Function){var Y=H.disabled.call(T,H);Y&&(M[s]+=" disabled",J(M,"color",x.contextMenuDisabledLabelColor))}else H.disabled&&(M[s]+=" disabled",J(M,"color",x.contextMenuDisabledLabelColor));if(H.items){T.$21b||(T.$21b=new o.List);var K=N("ul");K[s]="submenu"+G,K.$45b=G,J(K,F,"hidden"),J(K,u,y),A(T._view,K),T.$21b.add(K),T.$2b(H.items,K)}}A(l,M)}}},rebuild:function(){var w=this,S=w._items,c=w._view;if(c&&(c[B]="",w.$21b=t,w.$5b=0,w.$19b=t,w.$20b=t,c.$26b=t,S&&0!==S.length)){var r=N("ul",w._r);A(c,r),w.$2b(S,r)}},addTo:function(u){if(u){var N=this,O=N.$13b;if(N.$12b=u,N.$9b=function(i){O.$44b(i)},N.$27b=function(N){O.$41b(N)},i){var P=N.$6b=function(M){O.$38b(M)},w=N.$7b=function(i){O.$39b(i)},f=N.$8b=function(W){O.$40b(W)};a(u,"touchstart",P,!0),a(u,"touchmove",w),a(u,"touchend",f)}else a(u,"contextmenu",N.$27b)}},showOnView:function(D,N,w){D=D.getView?D.getView():D;var W=x.getWindowInfo(),c=D.getBoundingClientRect();this.show(c.left+W.left+N,c.top+W.top+w)},show:function(X,Y,L){var Q=this,L=L==t?!0:!1,f=Q._view;if(f){if(Q.invalidate(),1===arguments.length){var I=X;if(i){var o=H(I);X=o.pageX,Y=o.pageY}else X=I.pageX,Y=I.pageY}var b=x.getWindowInfo(),O=b.width,N=b.height,c=b.left,U=b.top,$={pageX:X,pageY:Y,clientX:X-c,clientY:Y-U,target:1,originEvent:I},K=$.clientX,V=$.clientY,F=function(S){S.style.height=N-6+g;var G=k(),Z=k(),K=function(H){J(H,u,y),J(H,"text-align","center"),J(H,W,"100%"),J(H,"font-size",10+g),J(H,"padding","2px 0"),J(H,"border","0px solid "+x.contextMenuScrollerBorderColor),J(H,"background-color",x.contextMenuScrollerColor1),H.style.backgroundImage="-webkit-linear-gradient(top, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")",H.style.backgroundImage="linear-gradient(to bottom, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")"};G[s]="menu-arrow-item menu-arrow-item-top",Z[s]="menu-arrow-item menu-arrow-item-bottom",K(G),J(G,"top",T),J(G,"left",T),J(G,"border-bottom-width",1+g),G[B]="▲",K(Z),J(Z,"bottom",T),J(Z,"left",T),J(Z,"border-top-width",1+g),Z[B]="▼",S.$24b=G,S.$25b=Z,S.$18b=S.scrollTop,S.$22b=S.scrollHeight,S.$23b=S.clientHeight,A(S,G),A(S,Z),Q.$42b(S)};Q.beforeShow&&Q.beforeShow($);var r=Q._items;if(r&&(I&&I.preventDefault(),r.length)){Q.rebuild(),x.appendToScreen(f),f.$26b=w(f,".menu-item");var M=f.children[0];M.offsetHeight>N&&F(M);var D=V+(L?1:0),h=K+(L?1:0),R=function(f){for(var v=0,G=0,Y=0,b=Q.$43b;Y<f.children.length;Y++){var u=f.children[Y];if(u.getAttribute("data-id")){var r=u.children[1],e=u.children[2],V=r.children;if(b){var U=V[0];V.length>1&&(U=V[1]),U.offsetWidth>b&&(U[B]="<marquee scrollamount='3'>"+U[B]+"</marquee>",U.children[0].style.verticalAlign="text-bottom",J(U,W,b+g),J(U,q,"inline-block"))}var I=r.offsetWidth,s=e.offsetWidth;I>v&&(v=I),s>G&&(G=s)}}for(Y=0;Y<f.children.length;Y++){var u=f.children[Y];if(u.getAttribute("data-id")){var r=u.children[1],e=u.children[2],y=r.children[0],R=r.children[1];!R&&y.style.width&&J(y,W,v+g),J(r,W,v+g),J(e,W,G+g)}}};R(M);var E=V+3+f.offsetHeight,G=K+3+f.offsetWidth;E>N?J(f,d,D-(E-N)+U+g):J(f,d,D+U+g),G>O?J(f,z,h-(G-O)+c+g):J(f,z,h+c+g);var P=Q.$21b;P&&P.each(function(k){R(k),k.offsetHeight>N&&F(k)}),Q.$9b&&a(l(),i?"touchstart":"mousedown",Q.$9b,!0),Q.afterShow&&Q.afterShow($),Q.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=t:!1},getRelatedView:function(){return this.$12b},hide:function(){var w=this,V=w._view;V&&V.parentNode&&(G(V.parentNode,V),Y(l(),i?"touchstart":"mousedown",w.$9b,!0),w.afterHide&&w.afterHide())},dispose:function(){var p=this,M=p.$12b,d=p._view;d&&(d.parentNode&&G(d.parentNode,d),p.disableGlobalKey(),M&&(i?(Y(M,"touchstart",p.$6b,!0),Y(M,"touchmove",p.$7b),Y(M,"touchend",p.$8b)):Y(M,"contextmenu",p.$27b)),p._view=p._items=p.$21b=p.$19b=p.$12b=p.beforeShow=p.afterShow=p.afterHide=p.$9b=p.$3b=p.$6b=p.$7b=p.$8b=p.$27b=t)},$46b:function(T,s,m,i,y){var K=O.initContext(T);O.translateAndScale(K,0,0,1),K.clearRect(0,0,m,i),x.drawStretchImage(K,x.getImage(s),"fill",0,0,m,i,y,this),K.restore()},$47b:function(){var $,d,e,G=this,q=G._view;if(G.isShowing()){var s=w(q,".check-prefix");for(e=0;e<s.length;e++){var m=s[e];$=m.clientWidth,d=m.clientHeight,m.$48b=$,m.$49b=d,O.setCanvas(m,$,d)}var b=w(q,".radio-prefix");for(e=0;e<b.length;e++){var z=b[e];$=z.clientWidth,d=z.clientHeight,z.$48b=$,z.$49b=d,O.setCanvas(z,$,d)}var l=w(q,".contextmenu-item-icon");for(e=0;e<l.length;e++){var o=l[e];$=o.clientWidth,d=o.clientHeight,o.$48b=$,o.$49b=d,O.setCanvas(o,$,d)}}},validateImpl:function(){var e,L,g,K=this,h=K._view;if(K.isShowing()){var X=w(h,".check-prefix");for(g=0;g<X.length;g++){var i=X[g];e=i.$48b,L=i.$49b,e&&L&&K.$46b(i,x.contextMenuCheckIcon,e,L)}var J=w(h,".radio-prefix");for(g=0;g<J.length;g++){var j=J[g];e=j.$48b,L=j.$49b,e&&L&&K.$46b(j,x.contextMenuRadioIcon,e,L)}var q=w(h,".contextmenu-item-icon");for(g=0;g<q.length;g++){var Y=q[g];e=Y.$48b,L=Y.$49b,e&&L&&K.$46b(Y,x.getImage(Y.$50b),e,L,Y._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);